SET TERM ^ ;
/* Connect using username: SYSDBA */
/* and server: WI-V6.3.3.18185 Firebird 2.1 */
SET SQL DIALECT 3^
SET AUTODDL ON^
CREATE DATABASE 'c:\prg\alquileres\alquileres.fdb'
  USER 'SYSDBA' PASSWORD 'masterkey'
  DEFAULT CHARACTER SET UTF8^

CREATE GENERATOR GENCAJATIPOMOVIMIENTO^
SET GENERATOR GENCAJATIPOMOVIMIENTO TO 3^

CREATE GENERATOR GENLOCALIDAD^
SET GENERATOR GENLOCALIDAD TO 2^

CREATE GENERATOR GENPROPIEDADTIPO^
SET GENERATOR GENPROPIEDADTIPO TO 5^

CREATE GENERATOR GENTIPOCONTACTO^
SET GENERATOR GENTIPOCONTACTO TO 0^

CREATE GENERATOR GENTIPODOCUMENTO^
SET GENERATOR GENTIPODOCUMENTO TO 0^

CREATE GENERATOR GENTIPOLIQUIDACION^
SET GENERATOR GENTIPOLIQUIDACION TO 4^

CREATE GENERATOR GENTUGBANCOS^
SET GENERATOR GENTUGBANCOS TO 4^

CREATE GENERATOR GENTUGCONTRATOSTIPO^
SET GENERATOR GENTUGCONTRATOSTIPO TO 3^

CREATE GENERATOR GENTUGGASTOSMENSUALES^
SET GENERATOR GENTUGGASTOSMENSUALES TO 4^

COMMIT^

CREATE DOMAIN "guid"
  AS VARCHAR(38)
  CHARACTER SET ASCII
  DEFAULT '{00000000-0000-0000-0000-000000000000}'^

COMMIT^

CREATE TABLE TBCONTACTOS (
  IDCONTACTO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  CONTACTO VARCHAR(250),
  REFTIPOCONTACTO INTEGER DEFAULT 0,
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  REFRELACION guid NOT NULL,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TBCONTRATOS (
  IDCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  CARPETA INTEGER DEFAULT 0,
  CODIGO VARCHAR(50),
  REFTIPOCONTRATO INTEGER DEFAULT 0,
  FINICIO DATE,
  FFINALIZACION DATE,
  NSENA FLOAT DEFAULT 0,
  NPORCGASTOSADM FLOAT DEFAULT 0,
  NSELLADO FLOAT DEFAULT 0,
  NHONORARIOS FLOAT DEFAULT 0,
  NPORCPUNITORIOSDIARIOS FLOAT DEFAULT 0,
  BLIQPROPIETARIOBANCO SMALLINT DEFAULT 0,
  REFCUENTAPROPIETARIO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  BVISIBLE SMALLINT DEFAULT 1,
  REFPROPIEDAD guid,
  NDIAVENCIMIENTO INTEGER DEFAULT 10,
  BALQGARANTIZADO SMALLINT DEFAULT 0,
  NDEPEFECTIVO FLOAT DEFAULT 0,
  NDEPDOCUMENTO FLOAT DEFAULT 0,
  NDILIGENC FLOAT DEFAULT 0,
  NHONORCUOTAS INTEGER DEFAULT 1 )^

CREATE TABLE TBCONTRATOSCOBROS (
  IDCONTRATOCOBRO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  FVENCIMIENTO DATE,
  NMONTO FLOAT DEFAULT 0,
  NMES INTEGER DEFAULT 0,
  NANO INTEGER DEFAULT 0,
  NPAGADO FLOAT DEFAULT 0 )^

CREATE TABLE TBCONTRATOSPAGARES (
  IDCONTRATOPAGARE guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  FVENCIMIENTO DATE,
  NMONTO FLOAT DEFAULT 0,
  BCOBRADO SMALLINT DEFAULT 0 )^

CREATE TABLE TBDOMICILIOS (
  IDDOMICILIO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  DIRECCION VARCHAR(250),
  REFLOCALIDAD INTEGER DEFAULT 0,
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  REFRELACION guid NOT NULL,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TBGARANTES (
  IDGARANTE guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  CAPELLIDOS VARCHAR(500),
  CNOMBRES VARCHAR(500),
  REFTIPODOCUMENTO INTEGER DEFAULT 0,
  DOCUMENTO VARCHAR(20),
  CUIT VARCHAR(20),
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  BVISIBLE SMALLINT DEFAULT 1,
  CTELFIJO VARCHAR(300),
  CTELMOVIL VARCHAR(300),
  CEMAIL VARCHAR(500) )^

CREATE TABLE TBGASTOSMENSUALES (
  IDGASTOMENSUAL guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFGASTO INTEGER DEFAULT 0,
  NMONTO FLOAT DEFAULT 0,
  BINQUILINO SMALLINT DEFAULT 0,
  BPROPIETARIO SMALLINT DEFAULT 0,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TBINQUILINOS (
  IDINQUILINO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  CAPELLIDOS VARCHAR(500),
  CNOMBRES VARCHAR(500),
  REFTIPODOCUMENTO INTEGER DEFAULT 0,
  DOCUMENTO VARCHAR(20),
  CUIT VARCHAR(20),
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  BVISIBLE SMALLINT DEFAULT 1,
  CTELFIJO VARCHAR(300),
  CTELMOVIL VARCHAR(300),
  CEMAIL VARCHAR(500) )^

CREATE TABLE TBLIQINQCABECERA (
  IDLIQINQCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  FECHA DATE,
  NRO INTEGER DEFAULT -1,
  MONTO FLOAT DEFAULT 0,
  BANULADA SMALLINT DEFAULT 0,
  FANULADA DATE,
  TXNOTA BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  REFINQUILINO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' )^

CREATE TABLE TBLIQINQCAJA (
  IDLIQINQCAJA guid,
  REFLIQINQCABECERA guid,
  DESCRIPCION VARCHAR(1000),
  MONTO FLOAT,
  FVENCIMIENTO DATE,
  FPAGO DATE,
  PAGADO FLOAT,
  REFTIPO SMALLINT,
  REFERENCIA guid,
  BVISIBLE SMALLINT DEFAULT 1,
  REFCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  BPAGADO SMALLINT DEFAULT 0 )^

CREATE TABLE TBLIQINQDESCUENTOS (
  IDLIQINQDESCUENTO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFLIQCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  DESCUENTO VARCHAR(500),
  NMONTO FLOAT DEFAULT 0,
  REFCONTRATO guid,
  BVISIBLE INTEGER DEFAULT 1,
  BPAGADO SMALLINT DEFAULT 0 )^

CREATE TABLE TBLIQINQGASTOS (
  IDLIQINQGASTO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFLIQCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFREPARACION guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  GASTO VARCHAR(500),
  NMONTO FLOAT DEFAULT 0,
  REFCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  BVISIBLE INTEGER DEFAULT 1,
  BPAGADO SMALLINT DEFAULT 0 )^

CREATE TABLE TBLIQINQITEMS (
  IDLIQINQITEMS guid,
  REFLIQINQCABECERA guid,
  REFLIQINQITEM guid,
  TIPOITEM SMALLINT DEFAULT 0,
  MONTOPAGADO FLOAT DEFAULT 0,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TBLIQINQMESES (
  IDLIQINQMES guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFCONTRATOCOBRO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFLIQCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  FVENCIMIENTO DATE,
  NMONTO FLOAT DEFAULT 0,
  NPUNITORIOS FLOAT DEFAULT 0,
  NTOTAL FLOAT DEFAULT 0,
  NMES INTEGER DEFAULT 0,
  NANO INTEGER DEFAULT 0,
  BVISIBLE SMALLINT DEFAULT 1,
  BPAGADO SMALLINT DEFAULT 0 )^

CREATE TABLE TBLIQINQPAGARES (
  IDLIQINQPAGARE guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFLIQCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFCONTRATOPAGARE guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  FVENCIMIENTO DATE,
  NMONTO FLOAT,
  NPUNITORIOS FLOAT,
  NTOTAL FLOAT,
  BVISIBLE INTEGER DEFAULT 1,
  BPAGADO SMALLINT DEFAULT 0 )^

CREATE TABLE TBLIQPROPCABECERA (
  IDLIQUPROPCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  FECHA DATE,
  NRO INTEGER DEFAULT -1,
  NMONTO FLOAT DEFAULT 0,
  BANULADA SMALLINT DEFAULT 0,
  FANULADA DATE,
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80 )^

CREATE TABLE TBLIQPROPDESCUENTOS (
  IDLIQPROPDESCUENTO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFLIQPROPCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFREPARACION guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  GASTO VARCHAR(500),
  NMONTO FLOAT DEFAULT 0 )^

CREATE TABLE TBLIQPROPPAGOS (
  IDLIQPROPPAGO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  NMES INTEGER DEFAULT 0,
  NANO INTEGER DEFAULT 0,
  NMONTO FLOAT DEFAULT 0,
  REFLIQPROPCABECERA guid DEFAULT '{00000000-0000-0000-0000-000000000000}' )^

CREATE TABLE TBMOVIMIENTOSCAJA (
  IDMOVIMIENTOCAJA guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  FECHA DATE,
  REFLIQUIDACION guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  FACTURA VARCHAR(50),
  RECIBO VARCHAR(50),
  FFACTURA DATE,
  FRECIBO DATE,
  NMONTO FLOAT DEFAULT 0,
  TIPOMOVIMIENTO VARCHAR(1) )^

CREATE TABLE TBPROPIEDADES (
  IDPROPIEDAD guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  CALLE VARCHAR(500),
  ALTURA VARCHAR(20),
  REFLOCALIDAD INTEGER DEFAULT 0,
  REFTIPO INTEGER DEFAULT 0,
  FALTA DATE,
  TXDATOSGENERALES BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  NALQUILER FLOAT DEFAULT 0,
  NEXPENSAS FLOAT DEFAULT 0,
  BVISIBLE SMALLINT DEFAULT 1,
  TXNOTASPROPIETARIOS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  CPISODTO VARCHAR(150),
  CCATASTRO VARCHAR(500) )^

CREATE TABLE TBPROPIEDADESFOTOS (
  IDPROPIEDADFOTO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFPROPIEDAD guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  TITULO VARCHAR(500),
  FOTO BLOB SUB_TYPE 0 SEGMENT SIZE 80 )^

CREATE TABLE TBPROPIEDADESPRECIOS (
  IDPROPIEDADPRECIO guid NOT NULL,
  CUOTAINICIO INTEGER DEFAULT 0,
  CUOTAFIN INTEGER DEFAULT 0,
  NMONTO FLOAT DEFAULT 0,
  REFPROPIEDAD guid DEFAULT '{00000000-0000-0000-0000-000000000000}' )^

CREATE TABLE TBPROPIETARIOS (
  IDPROPIETARIO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  CAPELLIDOS VARCHAR(500),
  CNOMBRES VARCHAR(500),
  REFTIPODOCUMENTO INTEGER DEFAULT 0,
  DOCUMENTO VARCHAR(20),
  CUIT VARCHAR(20),
  FALTA DATE,
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TBPROPIETARIOSBANCOS (
  IDPROPIETARIOBANCO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFPROPIETARIO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFBANCO INTEGER DEFAULT 0,
  CUENTA VARCHAR(50),
  CBU VARCHAR(20),
  TXNOTAS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TBREPARACIONES (
  IDREPARACION guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFPROPIEDAD guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  FRECLAMO DATE,
  TXRECLAMO BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  REFTOMADOPOR guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  FREPARACION DATE,
  TXREPARACION BLOB SUB_TYPE 0 SEGMENT SIZE 80,
  NMONTO FLOAT DEFAULT 0,
  NMONTOPROPIETARIO FLOAT DEFAULT 0,
  BCOBROPROPIETARIO SMALLINT DEFAULT 1,
  NMONTOINQUILINO FLOAT DEFAULT 0,
  BMONTOINQUILINO SMALLINT DEFAULT 0,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TBUSUARIOS (
  IDUSUARIO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  USUARIO VARCHAR(15) DEFAULT 'usuario',
  CLAVE VARCHAR(15) DEFAULT '123456',
  BVISIBLE SMALLINT DEFAULT 1,
  PPROPIEDADES VARCHAR(1) DEFAULT 'N',
  PPROPIETARIOS VARCHAR(1) DEFAULT 'N',
  PINQUILINOS VARCHAR(1) DEFAULT 'N',
  PCONTRATOS VARCHAR(1) DEFAULT 'N',
  PCAJAINQUILINOS VARCHAR(1) DEFAULT 'N',
  PCAJAMOVIMIENTOS VARCHAR(1) DEFAULT 'N',
  PCAJAPROPIETARIOS VARCHAR(1) DEFAULT 'N',
  PAPLICACION VARCHAR(4) DEFAULT 'N' )^

CREATE TABLE TBVALORES (
  IDVALOR INTEGER,
  NOMBRE VARCHAR(10),
  VALORINT INTEGER,
  VALORSTR VARCHAR(500) )^

CREATE TABLE TRCONTRATOSGARANTES (
  IDCONTRATOGARANTE VARCHAR(38),
  REFCONTRATO VARCHAR(38),
  REFGARANTE VARCHAR(38) )^

CREATE TABLE TRCONTRATOSINQUILINOS (
  IDCONTRATOINQUILINO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFCONTRATO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFINQUILINO guid DEFAULT '{00000000-0000-0000-0000-000000000000}' )^

CREATE TABLE TRPROPIETARIOSPROPIEDADES (
  IDPROPIETARIOPROPIEDAD guid DEFAULT '{00000000-0000-0000-0000-000000000000}' NOT NULL,
  REFPROPIETARIO guid DEFAULT '{00000000-0000-0000-0000-000000000000}',
  REFPROPIEDAD guid DEFAULT '{00000000-0000-0000-0000-000000000000}' )^

CREATE TABLE TUGBANCOS (
  IDBANCO INTEGER DEFAULT -1,
  BANCO VARCHAR(250),
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGCAJATIPOMOVIMIENTOS (
  IDCAJATIPOMOVIMIENTO INTEGER DEFAULT -1,
  TIPOMOVIMIENTO VARCHAR(50),
  REFOPERACION INTEGER DEFAULT 0,
  REFAFECTA INTEGER DEFAULT 0,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGCONTRATOSTIPOS (
  IDCONTRATOTIPO INTEGER DEFAULT -1,
  CONTRATOTIPO VARCHAR(250),
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGGASTOSMENSUALES (
  IDGASTOMENSUAL INTEGER DEFAULT -1,
  GASTOMENSUAL VARCHAR(250),
  NMONTO FLOAT DEFAULT 0,
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGLOCALIDADES (
  IDLOCALIDAD INTEGER DEFAULT -1,
  LOCALIDAD VARCHAR(250),
  CODIGOPOSTAL VARCHAR(15),
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGPROPIEDADESTIPOS (
  IDPROPIEDADTIPO INTEGER DEFAULT -1,
  PROPIEDADTIPO VARCHAR(250),
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGTIPOSCONTACTO (
  IDTIPOCONTACTO INTEGER DEFAULT -1,
  TIPOCONTACTO VARCHAR(50),
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGTIPOSDOCUMENTO (
  IDTIPODOCUMENTO INTEGER DEFAULT -1,
  TIPODOCUMENTO VARCHAR(250),
  ABTIPODOCUMENTO VARCHAR(5),
  BVISIBLE SMALLINT DEFAULT 1 )^

CREATE TABLE TUGTIPOSLIQUIDACIONES (
  IDTIPOLIQUIDACION INTEGER DEFAULT -1,
  TIPOLIQUIDACION VARCHAR(250),
  BVISIBLE SMALLINT DEFAULT 1 )^

COMMIT^

CREATE TRIGGER INS_TUGBANCOS FOR TUGBANCOS
  BEFORE INSERT
AS
BEGIN

  If (New.idBanco = -1) then

   New.idBanco = GEN_ID(genTugBancos,1);

END^

CREATE TRIGGER INS_TUGCAJATIPOMOVIMIENTOS FOR TUGCAJATIPOMOVIMIENTOS
  BEFORE INSERT
AS
BEGIN
  If (New.idCajaTipoMovimiento = -1) then
   New.idCajaTipoMovimiento = GEN_ID(genCajaTipoMovimiento,1);
END^

CREATE TRIGGER INS_TUGCONTRATOSTIPO FOR TUGCONTRATOSTIPOS
  BEFORE INSERT
AS
BEGIN

  If (New.idContratoTipo = -1) then

   New.idContratoTipo = GEN_ID(genTugContratosTipo,1);

END^

CREATE TRIGGER INS_TUGGASTOSMENSUALES FOR TUGGASTOSMENSUALES
  BEFORE INSERT
AS
BEGIN

  If (New.idGastoMensual = -1) then

   New.idGastoMensual = GEN_ID(genTugGastosMensuales,1);

END^

CREATE TRIGGER INS_TUGLOCALIDAD FOR TUGLOCALIDADES
  BEFORE INSERT
AS
BEGIN

  If (New.idLocalidad = -1) then

   New.idLocalidad = GEN_ID(genLocalidad,1);

END^

CREATE TRIGGER INS_TUGPROPIEDADESTIPOS FOR TUGPROPIEDADESTIPOS
  BEFORE INSERT
AS
BEGIN

  If (New.idPropiedadTipo = -1) then

   New.idPropiedadTipo = GEN_ID(genPropiedadTipo,1);

END^

CREATE TRIGGER INS_TUGTIPOCONTACTO FOR TUGTIPOSCONTACTO
  BEFORE INSERT
  POSITION 5
AS
BEGIN

  If (New.idTipoContacto = -1) then

   New.idTipoContacto = GEN_ID(genTipoContacto,1);

END^

CREATE TRIGGER INS_TUGTIPODOCUMENTO FOR TUGTIPOSDOCUMENTO
  BEFORE INSERT
  POSITION 3
AS
BEGIN

  If (New.idTipoDocumento = -1) then

   New.idTipoDocumento = GEN_ID(genTipoDocumento,1);

END^

CREATE TRIGGER INS_TUGTIPOLIQUIDACION FOR TUGTIPOSLIQUIDACIONES
  BEFORE INSERT
  POSITION 3
AS
BEGIN
  If (New.idTipoLiquidacion = -1) then
   New.idTipoLiquidacion = GEN_ID(genTipoLiquidacion,1);
END^

COMMIT^

/* - - - - - - - - - - - - - - - -
List of possible problems detected
 - - - - - - - - - - - - - - - - -
None
- - - - - - - - - - - - - - - - */